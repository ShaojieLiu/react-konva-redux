# 分层策略

----

### 目的

1. 如何分konva layer性能较好
2. 用konva stage代替layer性能如何
3. konva dom混用该如何分层
4. 如何在元素层级变动时 分层改动较小

----

### 实验

1. 如何分konva layer性能较好

下表使用react@16

|总数|每层个数|层数|FPS|备注|
|:--|:--|:--|:--|:--|
|1600|80|20|26|明显不跟手|
|800|80|10|30|明显不跟手|
|400|80|5|36|轻微不跟手|

下表仅使用konva@2

|总数|每层个数|层数|FPS|备注|
|:--|:--|:--|:--|:--|
|1600|80|20|26|明显不跟手|
|800|80|10|40|轻微不跟手|
|800|40|20|50|-|
|800|20|40|45|-|
|400|80|5|50|极轻微不跟手|

2. 用konva stage代替layer性能如何

|分层单位|总数|每层个数|层数|FPS|备注|
|:--|:--|:--|:--|:--|:--|
|layer|1600|80|20|26|明显不跟手|
|layer|800|80|10|40|轻微不跟手|
|layer|800|40|20|50|-|
|layer|800|20|40|45|-|
|layer|400|80|5|50|极轻微不跟手|

|stage|1600|80|20|28|明显不跟手|
|stage|800|80|10|38|轻微不跟手|
|stage|800|40|20|37|明显不跟手|
|stage|800|20|20|30|明显不跟手|
|stage|400|80|20|33|明显不跟手|

结论: 在大量节点(1600)时性能差别不大, 但在800节点时, layer性能明显优于stage分层

3. 

